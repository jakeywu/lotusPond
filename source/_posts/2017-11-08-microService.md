---
title: 微服务基础理论
comments: true
tags: 微服务基础理论
categories: 微服务
date: 2017-11-08 11:52:23
updated: 2017-11-08 11:52:23
---


### 微服务架构综述

微服务是一种架构模式,提倡将单一应用程序分解成一组小的服务,服务之间相互协调,相互配合. 每个服务运行在独立的进程当中.服务之间采用轻量级的通信机制互相沟通. 能够独立地部署到生产环境和类生产环境. 应尽量避免统一的,集中式服务管理机制.对于具体服务而言,应根据业务上下文,采用合适的语言,工具进行构建. 微服务架构通过对特定的业务领域的分析和建模, 将复杂的应用分解成小而专一,耦合度低并高度自治的一组服务,每个服务都是很小的应用
   
<!-- more -->
### 单块架构的弊端和微服务架构的理论基础
1. 单快架构: 功能集中, 代码和数据中心化, 一个发布包, 部署后运行在同一个进程的应用程序. 传统的软件三层架构设计分为(逻辑上分为三层,最终都是编译/打包/部署到一个进程):

    表示层, 聚焦数据显示和用户交互
    
    业务逻辑层, 聚焦业务逻辑处理
    
    数据访问层, 聚焦数据的存储和访问
2. 微服务架构: 开发和运维高度协同, 在完成高效部署的同时提高生产环境的可靠性, 稳定性, 弹性和安全性. 
  
    步骤: 代码静态检查,Docker映像构建和部署, 持续交付流水, 服务日志聚合以及监控和报警, HAL通信机制,消费者驱动的测试
    涉及到: 技术选型,服务划分,服务注册,服务安全,服务测试,服务运维,组织架构变化,可持续交付流水线,DevOps文化

单块架构的优势: 易于开发   易于测试   易于部署  易于水平伸缩(增加节点,均衡负载, 分发策略)
单块机构面临的挑战: 维护成本增加   持续交互周期长    新人培养周期长    技术选型成本高    可扩展性差     构建全功能团队难

### 如何具体定义微服务
代码行数    静态语言: 结构规范, 编译期的语法检查, 便于调试, 类型安全性高, 类型相关代码多; 动态语言: 灵活性高, 运行时可以改变内存结构, 无类型

检查, 测试覆盖率要求高(因此,代码行数无法成为微服务的决定因素)

重写时间   能力不同,周期不同.  (因此,代码行数无法成为微服务的决定因素)

参考: 业务独立性(领域行为等等)  团队自主性(10以内, 不同技能角色)
    
SOLID原则:
SRP	 The Single Responsibility Principle 单一职责原则 (当需要修改某个类的时候原因有且只有一个（THERE SHOULD NEVER BE MORE THAN ONE REASON FOR A CLASS TO CHANGE）。换句话说就是让一个类只做一种类型责任，当这个类需要承当其他类型的责任的时候，就需要分解这个类)

OCP	 The Open Closed Principle 开放封闭原则  (软件实体应该是可扩展，而不可修改的。也就是说，对扩展是开放的，而对修改是封闭的。这个原则是诸多面向对象编程原则中最抽象、最难理解的一个)

LSP	 The Liskov Substitution Principle	里氏替换原则  (当一个子类的实例应该能够替换任何其超类的实例时，它们之间才具有is-A关系)

DIP  The Dependency Inversion Principle  依赖倒置原则  (高层模块不应该依赖于低层模块，二者都应该依赖于抽象  抽象不应该依赖于细节，细节应该依赖于抽象)

ISP  The Interface Segregation Principle   接口分离原则  (不能强迫用户去依赖那些他们不使用的接口。换句话说，使用多个专门的接口比使用单一的总接口总要好)
